<!-- FULL ADMIN LAYOUT + DASHBOARD -->
<div class="flex h-screen bg-gray-950 text-gray-100">

  <!-- Sidebar -->
  <aside class="w-64 bg-gray-900 border-r border-gray-800 flex flex-col">

    <!-- Logo -->
    <div class="p-6 border-b border-gray-800">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-lg overflow-hidden">
          <img src="assets/icon.png" class="w-full h-full object-contain" />
        </div>
        <h1
          class="text-2xl font-bold bg-gradient-to-r from-teal-400 to-cyan-400 bg-clip-text text-transparent">
          ConstructPro
        </h1>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-4 py-6 space-y-1">

      <a routerLink="/admin/dashboard" routerLinkActive="active" class="nav-link group">
        <ng-icon name="lucideLayoutDashboard" class="icon"></ng-icon>
        <span>Dashboard</span>
      </a>

      <a routerLink="/admin/users" routerLinkActive="active" class="nav-link group">
        <ng-icon name="lucideUsers" class="icon"></ng-icon>
        <span>Users</span>
      </a>

      <a routerLink="/admin/service" routerLinkActive="active" class="nav-link group">
        <ng-icon name="lucideWrench" class="icon"></ng-icon>
        <span>Services</span>
      </a>

      <a routerLink="/admin/booking" routerLinkActive="active" class="nav-link group">
        <ng-icon name="lucideCalendarCheck" class="icon"></ng-icon>
        <span>Bookings</span>
      </a>

      <a routerLink="/admin/financials" routerLinkActive="active" class="nav-link group">
        <ng-icon name="lucideDollarSign" class="icon"></ng-icon>
        <span>Financials</span>
      </a>

      <a routerLink="/admin/notifications" routerLinkActive="active" class="nav-link group">
        <ng-icon name="lucideBell" class="icon"></ng-icon>
        <span>Notifications</span>
      </a>

      <a routerLink="/admin/audit" routerLinkActive="active" class="nav-link group">
        <ng-icon name="lucideHistory" class="icon"></ng-icon>
        <span>Audit Log</span>
      </a>

    </nav>

    <!-- Profile -->
    <div class="p-6 border-t border-gray-800">
      <div class="flex items-center gap-4">
        <div
          class="w-12 h-12 bg-gradient-to-br from-teal-400 to-cyan-600 rounded-full flex items-center justify-center font-bold text-xl text-white">
          SA
        </div>
        <div>
          <p class="font-semibold text-white">Super Admin</p>
          <p class="text-xs text-gray-400">sitesmart025@gmail.com</p>
        </div>
      </div>
    </div>

  </aside>

  <!-- MAIN CONTENT -->
  <main class="flex-1 overflow-y-auto p-8">

    <!-- Top Header -->
    <header class="flex justify-between items-center mb-8">
      <h2 class="text-3xl font-light">Super Admin Dashboard</h2>

      <div class="relative">
        <input type="text"
               placeholder="Search"
               class="bg-gray-800 rounded-full px-6 py-3 pl-12 w-96 focus:outline-none focus:ring-2 focus:ring-teal-500" />

        <svg class="w-5 h-5 absolute left-4 top-4 text-gray-500"
             fill="none"
             stroke="currentColor"
             viewBox="0 0 24 24">
          <path stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>
    </header>

    <!-- Stats Cards -->
    <ng-container *ngIf="stats as s; else statsLoading">
      <div class="grid grid-cols-4 gap-6 mb-8">

        <!-- Total Revenue -->
        <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700">
          <p class="text-gray-400 text-sm">Total Revenue</p>
          <p class="text-4xl font-bold mt-2">
            {{ s.totalRevenue | currency:'USD':'symbol':'1.0-0' }}
          </p>
          <p class="text-sm mt-1 flex items-center gap-1"
             [ngClass]="s.revenueChange >= 0 ? 'text-green-400' : 'text-red-400'">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z" />
            </svg>
            {{ s.revenueChange >= 0 ? '+' : '' }}{{ s.revenueChange | number:'1.1-1' }}%
          </p>
        </div>

        <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700">
          <p class="text-gray-400 text-sm">Active Customers</p>
          <p class="text-4xl font-bold mt-2">{{ s.activeCustomers }}</p>
          <p class="text-green-400 text-sm mt-1">Current Active Users</p>
        </div>


        <!-- Active Technicians -->
        <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700">
          <p class="text-gray-400 text-sm">Active Technicians</p>
          <p class="text-4xl font-bold mt-2">{{ s.activeTechnicians }}</p>
          <p class="text-sm mt-1 flex items-center gap-1"
             [ngClass]="s.technicianChange >= 0 ? 'text-green-400' : 'text-red-400'">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z" />
            </svg>
            {{ s.technicianChange >= 0 ? '+' : '' }}{{ s.technicianChange | number:'1.1-1' }}%
          </p>
        </div>

        <!-- Jobs in Progress -->
        <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700">
          <p class="text-gray-400 text-sm">Jobs in Progress</p>
          <p class="text-4xl font-bold mt-2">{{ s.jobsInProgress }}</p>
          <p class="text-sm mt-1 flex items-center gap-1"
             [ngClass]="s.jobsChange >= 0 ? 'text-green-400' : 'text-red-400'">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z" />
            </svg>
            {{ s.jobsChange >= 0 ? '+' : '' }}{{ s.jobsChange | number:'1.1-1' }}%
          </p>
        </div>

        <!-- New User Registrations -->
        <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700">
          <p class="text-gray-400 text-sm">New User Registrations</p>
          <p class="text-4xl font-bold mt-2">{{ s.newRegistrations }}</p>
          <p class="text-gray-400 text-sm mt-1">Last 7 days</p>
        </div>

      </div>
    </ng-container>

    <ng-template #statsLoading>
      <div class="grid grid-cols-4 gap-6 mb-8">
        <div
          class="bg-gray-800 rounded-2xl p-6 border border-gray-700 animate-pulse h-28 col-span-4 md:col-span-1"
          *ngFor="let i of [1,2,3,4]">
        </div>
      </div>
    </ng-template>

    <!-- Chart + Recent Activity -->
    <div class="grid grid-cols-3 gap-6">

      <!-- Booking Trends -->
      <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700 col-span-3 lg:col-span-2">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-xl font-medium">Booking Trends</h3>
          <div class="flex items-center gap-2 text-sm">
            <span class="text-green-400" *ngIf="trends">
              Last 30 Days â€¢ {{ trends.growth }}
            </span>
            <select class="bg-gray-700 rounded-lg px-4 py-2 text-sm focus:outline-none">
              <option>Last 30 Days</option>
              <option>Last 7 Days</option>
            </select>
          </div>
        </div>

        <!-- Static SVG placeholder (you can replace with real chart lib later) -->
        <div
          class="h-80 bg-gradient-to-r from-teal-900/30 via-transparent to-transparent rounded-xl flex items-center justify-center relative overflow-hidden">
          <svg class="absolute inset-0 w-full h-full" viewBox="0 0 800 300">
            <path d="M0 200 Q100 150, 200 180 T400 160 Q500 140, 600 180 T800 150"
                  fill="none"
                  stroke="#14b8a6"
                  stroke-width="4"
                  opacity="0.6" />
            <path d="M0 200 Q100 150, 200 180 T400 160 Q500 140, 600 180 T800 150"
                  fill="none"
                  stroke="#14b8a6"
                  stroke-width="3"
                  class="animate-pulse" />
          </svg>
          <p class="text-teal-400 text-lg z-10">
            Booking Trend Line Chart
          </p>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700">
        <h3 class="text-xl font-medium mb-6">Recent Activity</h3>

        <ul class="space-y-5" *ngIf="activities && activities.length; else noActivity">
          <li class="flex gap-4" *ngFor="let a of activities">
            <div class="w-3 h-3 rounded-full mt-1"
                 [ngClass]="{
                   'bg-teal-400': a.color === 'teal',
                   'bg-green-400': a.color === 'green',
                   'bg-blue-400': a.color === 'blue',
                   'bg-yellow-400': a.color === 'yellow',
                   'bg-red-400': a.color === 'red',
                   'bg-purple-400': a.color === 'purple'
                 }">
            </div>
            <div>
              <p class="text-sm">{{ a.message }}</p>
              <p class="text-gray-500 text-xs">{{ a.timeAgo }}</p>
            </div>
          </li>
        </ul>

        <ng-template #noActivity>
          <p class="text-gray-500 text-xs">No recent activity</p>
        </ng-template>
      </div>
    </div>
  </main>
</div>
