<!-- src/app/technician/dashboard.component.html -->
<div class="dashboard-root">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">
      <div class="logo">
        <span class="logo-ico">üõ†</span>
        <span class="logo-text">ConstructCo</span>
      </div>
    </div>

    <nav class="nav">
      <a class="nav-item active"><span class="nav-ico">‚ñ¶</span><span>Dashboard</span></a>
      <a class="nav-item"><span class="nav-ico">üß∞</span><span>Jobs</span></a>
      <a class="nav-item"><span class="nav-ico">üíº</span><span>Wallet</span></a>
      <a class="nav-item"><span class="nav-ico">üë§</span><span>Profile</span></a>
      <a class="nav-item"><span class="nav-ico">‚öôÔ∏è</span><span>Settings</span></a>
    </nav>

    <div class="side-footer">
      <div class="profile-row">
        <img class="avatar" [src]="profileImage || '/assets/avatar.png'" alt="avatar" />
        <div class="profile-text">
          <div class="name">{{ profileName }}</div>
          <div class="role">Technician</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main-area">
    <header class="topbar">
      <div>
        <h1 class="welcome-title">Welcome, <span class="accent">{{ profileName || 'John' }}</span>!</h1>
        <div class="subtitle">Here's your performance overview for today.</div>
      </div>

      <div class="top-actions">
        <button class="btn btn-new">+ New Job</button>
      </div>
    </header>

    <!-- STATS -->
    <section class="stats-grid">
      <div class="stat-card">
        <div class="stat-head">Earnings (This Month)</div>
        <div class="stat-value">\${{ stats.totalRevenue | number:'1.0-0' }}</div>
        <div class="stat-delta positive">‚ñ≤ {{ stats.revenueChange }}%</div>
      </div>

      <div class="stat-card">
        <div class="stat-head">Jobs Completed</div>
        <div class="stat-value">{{ stats.jobsCompleted }}</div>
        <div class="stat-delta positive">‚ñ≤ {{ stats.jobsChange }}%</div>
      </div>

      <div class="stat-card">
        <div class="stat-head">Current Rating</div>
        <div class="stat-value">{{ stats.currentRating }}/5</div>
        <div class="stat-delta negative">‚ñº 0.1</div>
      </div>

      <div class="stat-card">
        <div class="stat-head">Wallet Balance</div>
        <div class="stat-value">\${{ stats.wallet | number:'1.2-2' }}</div>
        <div class="stat-delta positive">‚ñ≤ 15%</div>
      </div>
    </section>

    <!-- CONTENT -->
    <section class="content-grid">
      <!-- LEFT: requests -->
      <div class="col-left">
        <div class="card requests">
          <div class="card-head">
            <h3>New Job Requests</h3>
            <div class="muted">You have {{ newJobs.length }} new requests</div>
          </div>

          <div class="requests-list">
            <div class="request-row" *ngFor="let j of newJobs">
              <div class="request-left">
                <div class="request-ico">üîß</div>
                <div class="request-body">
                  <div class="req-title">{{ j.title }}</div>
                  <div class="req-sub">{{ j.rateText }} ‚Ä¢ {{ j.address }}</div>
                </div>
              </div>

              <div class="request-actions">
                <button class="btn btn-decline" (click)="decline(j.bookingID)">Decline</button>
                <button class="btn btn-accept" (click)="acceptJob(j.bookingID)" [disabled]="isPending()">Accept</button>
              </div>
            </div>

            <div *ngIf="newJobs.length === 0" class="empty">No new requests</div>
          </div>
        </div>
      </div>

      <!-- RIGHT: current + earnings -->
      <aside class="col-right">
        <div class="card current" *ngIf="currentJob">
          <div class="card-head">
            <h3>Current Job</h3>
          </div>

          <div class="current-body">
            <div class="current-title">{{ currentJob.title }}</div>
            <div class="current-address">{{ currentJob.address }}</div>

            <div class="progress-wrap">
              <div class="progress-label">In Progress</div>
              <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="currentJob.progress"></div>
              </div>
              <div class="progress-percent">{{ currentJob.progress }}%</div>
            </div>
          </div>
        </div>

        <div class="card earnings">
          <div class="card-head">
            <h3>Weekly Earnings</h3>
          </div>

          <div class="earn-body">
            <div class="earn-value">\${{ weekly.total | number:'1.0-0' }}</div>
            <div class="earn-change positive">+{{ weekly.change }}% vs last week</div>

            <div class="mini-spark">
              <div class="bar" *ngFor="let b of weekly.bars" [style.height.%]="b"></div>
            </div>
          </div>
        </div>
      </aside>
    </section>
  </main>
</div>
